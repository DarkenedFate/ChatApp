<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Chaaaaat</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>
    <link href="css/style.css" rel="stylesheet">

</head>
<body>

<div class="container white-text" id="login-container">
    <div class="row top-3 text-center">
        <h1>Welcome to RobotoChat</h1>
    </div>
    <div class="row top-3">
        <div class="col-md-5 col-md-offset-3 top-2">
            <input class="form-control" type="text" id="name" placeholder="choose a username"/>
        </div>
        <div class="col-md-1 top-2">
            <button type="button" class="btn btn-success" id="submit-user">Submit</button>
        </div>
    </div>
</div>

<div class="container white-text" id="chat-container">
    <div class="row top-3 text-center">
        <h1>Welcome to RobotoChat</h1>
    </div>
    <div class="row">
        <div class="col-md-11 top-2">
            <input class="form-control" type="text" id="text" placeholder="start typing..."/>
        </div>
        <div class="col-md-1 top-2">
            <button type="button" class="btn btn-success" id="send-msg">Send</button>
        </div>
    </div>
    <div class="row top-2">
        <div class="col-md-12 white-text" style="font-size: 1.5em; overflow: auto; height: 30em;" id="messages">

        </div>
    </div>
</div>


<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
<script src="js/scripts.js"></script>
<script>
    var socket = io.connect("http://191.238.32.68:8080");

    var autoScroll = false;
    var name = '';

    $("#send-msg").click(function() {
        socket.emit('chat message', $("#text").val());
        $("#text").val('');
        return false;
    });
    $("#text").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();
            socket.emit('chat message', $("#text").val());
            $("#text").val('');
            return false;
        }
    });

    $("#submit-user").click(function() {

        name = $("#name").val();

        $("#login-container").fadeOut(function() {
            $("#chat-container").fadeIn();
        });

        socket.emit('username', name);

        socket.emit('server message', "[Server] " + name + " has joined the chat.");
        $("#name").val('');
        return false;
    });

    $("#name").keypress(function(event) {
        if (event.which == 13) {
            event.preventDefault();

            name = $("#name").val();

            $("#login-container").fadeOut(function() {
                $("#chat-container").fadeIn();
            });
            socket.emit('username', name);
            socket.emit('server message', "[Server] " + name + " has joined the chat.");
            $("#name").val('');
            return false;
        }
    });

    socket.on('chat message', function(msg) {
        $("#messages").append("<p>" + msg + "</p>");
        $("#messages").scrollTop($("#messages")[0].scrollHeight);
    });

    socket.on('server message', function(msg) {
        $("#messages").append("<p class='red-text'>" + msg + "</p>");
        $("#messages").scrollTop($("#messages")[0].scrollHeight);
    });
</script>
</body>
</html>